<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Пошук та завантаження даних OpenStreetMap &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Основи векторного моделювання" href="basic_vector_styling.html" />
    <link rel="prev" title="Використання додатків" href="using_plugins.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Вступ</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Створення мапи</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Робота з атрибутами</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Імпортування електронних таблиць або CSV-файлів</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Використання додатків</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Пошук та завантаження даних OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Основи векторного моделювання</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Обчислення довжини ліній та статистики</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Основи растрового моделювання та аналізу</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Зшивання та обрізання растрових мозаїк</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Робота з даними рельєфу</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Робота з даними WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Робота з проекціями</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Геоприв’язування топографічних листів та сканованих мап</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Прив’язування аерофотознімків</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Оцифровування картографічних даних</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Встановлення зв’язків між таблицями</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Встановлення просторових сполучень</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">Аналіз кількості точок всередині багатокутників</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Створення тепломап</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Виконання просторових запитів</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Аналіз найближчого сусідства</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Вибірка растрових даних із використанням точок або багатокутників</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Інтерполяція точкових даних</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Пакетна обробка за допомогою Середовища обробки</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Автоматизація складних робочих процесів за допомогою Редактора моделей</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Автоматизація створення мап за допомогою Print Composer Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Використання QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">Підрахунок кількості вершин у шарі</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Відкривання файлів BIL, BIP або BSQ у QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Перші кроки в програмуванні на Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Створення додатку на Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Використання користувальницьких виразів функцій Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Написання сценаріїв Python для Середовища обробки</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Запуск та планування обробки завдань QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_neighbor_polygons.html">Пошук сусідніх багатокутників у шарі</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins_pyqgis.html">Встановлення зв’язків між таблицями (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Навчальні матеріали з QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Джерела даних</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="using_plugins.html" title="Previous Chapter: Використання додатків"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Використання дод...</span>
    </a>
  </li>
  <li>
    <a href="basic_vector_styling.html" title="Next Chapter: Основи векторного моделювання"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Основи векторног... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>



  


<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="searching-and-downloading-openstreetmap-data">
<h1>Пошук та завантаження даних OpenStreetMap<a class="headerlink" href="#searching-and-downloading-openstreetmap-data" title="Постійне посилання на цей заголовок">¶</a></h1>
<p>Отримання даних високої якості є важливим для будь-якої задачі ГІС. Одним із великих ресурсів із вільними даними з відкритою ліцензією є <a class="reference external" href="http://www.openstreetmap.org/">OpenStreetMap(OSM)</a> . База даних OSM містить вулиці, локальні дані і полігони будівель. В QGIS інтегровані можливості отримання доступу до даних OSM в ГІС форматі. Цей урок пояснює як здійснити процес пошуку, завантаження і використання OSM даних в QGIS.</p>
<div class="section" id="overview-of-the-task">
<h2>Огляд завдання<a class="headerlink" href="#overview-of-the-task" title="Постійне посилання на цей заголовок">¶</a></h2>
<p>Знайдіть <em>Лондон</em> у базі даних OSM, прокрутіть і виділіть частину міста, і виберіть всі пивні у вигляді шейп-файлу.</p>
</div>
<div class="section" id="procedure">
<h2>Виконання<a class="headerlink" href="#procedure" title="Постійне посилання на цей заголовок">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">Для виконання задачі ми використаємо 2 плагіни. Переконайтеся що ви маєте встановлені плагіни <strong>OSM Place Search</strong> і <strong>OpenLayers</strong>. Дивіться <a class="reference internal" href="using_plugins.html"><em>Використання додатків</em></a>  для отримання інструкцій по завантаженню плагінів.</p>
</li>
</ol>
<img alt="../_images/139.png" class="align-center" src="../_images/139.png" />
<ol class="arabic simple" start="2">
<li>The <strong>OSM Place Search</strong> plugin will install itself as a <em>Panel</em> in QGIS.
You will see a new panel titled <span class="guilabel">OSM place search...</span> in QGIS.</li>
</ol>
<img alt="../_images/225.png" class="align-center" src="../_images/225.png" />
<ol class="arabic simple" start="3">
<li>The <strong>OpenLayers</strong> plugin is installed under the <em>Plugin</em> menu. This plugin
allows you to access basemaps from various providers in QGIS. Let&#8217;s load the
OpenStreetMap basemap in QGIS by going to <span class="menuselection">Plugins ‣
OpenLayers plugin ‣ Add OpenStreetMap layer</span>.</li>
</ol>
<img alt="../_images/316.png" class="align-center" src="../_images/316.png" />
<ol class="arabic simple" start="4">
<li><p class="first">Ви побачите світову мапу завантажену у QGIS.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Примітка</p>
<p class="last">Якщо ви не бачите ніяких даних - пересвідчіться що ви підключені до мережі - оскільки плитки базової мапи завантажуються через інтернет. Ви також можете використовувати інструмент <em>Pan</em> для того, щоб трохи перемістити полотно мапи, що призведе до оновлення базової мапи.</p>
</div>
<img alt="../_images/411.png" class="align-center" src="../_images/411.png" />
<ol class="arabic simple" start="5">
<li>Now, let&#8217;s search for <em>London</em>. Type the query in the <span class="guilabel">Name
contains...</span> box in the <strong>OSM Place Search</strong> panel. You can hover over the
results and the appropriate place will be highlighted on the map. Select the
first result - which the city of London in UK - and click the
<span class="guilabel">Zoom</span> button.</li>
</ol>
<img alt="../_images/511.png" class="align-center" src="../_images/511.png" />
<ol class="arabic simple" start="6">
<li>You will see the base layer move and center around the city of London. You
can use the <span class="guilabel">Zoom</span> tool to zoom and select the exact area of your
interest. For this tutorial, you can zoom in the center of the city as
shown.</li>
</ol>
<img alt="../_images/610.png" class="align-center" src="../_images/610.png" />
<ol class="arabic simple" start="7">
<li>Now we can download the data displayed on the map canvas. Go to
<span class="menuselection">Vector ‣ OpenStreetMap ‣ Downlod data</span>.</li>
</ol>
<img alt="../_images/710.png" class="align-center" src="../_images/710.png" />
<ol class="arabic simple" start="8">
<li>In the <span class="guilabel">Download OpenStreetMap data</span> dialog, choose
<span class="guilabel">From map canvas</span> as the <span class="guilabel">Extent</span>. Choose the path and
name the output file as <code class="docutils literal"><span class="pre">london.osm</span></code>.</li>
</ol>
<img alt="../_images/810.png" class="align-center" src="../_images/810.png" />
<ol class="arabic simple" start="9">
<li>The downloaded file with the <code class="docutils literal"><span class="pre">.osm</span></code> extension is an text file in the <a class="reference external" href="http://wiki.openstreetmap.org/wiki/OSM_XML">OSM
XML</a> format. We first need to
convert it into a suitable format that is easy to consume in QGIS. Go to
<span class="menuselection">Vector ‣ OpenStreetMap ‣ Import topology from XML</span>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Примітка</p>
<p class="last">Now that we do not need the <strong>OSM Place Search</strong> functionality, you can
click the close button to remove it from the main window. If you need to use
it again, you can enable it from  <span class="menuselection">View ‣ Panels ‣ OSM
place search...</span> (Windows) or <span class="menuselection">Settings ‣ Panels ‣ OSM place search...</span> (Linux).</p>
</div>
<img alt="../_images/910.png" class="align-center" src="../_images/910.png" />
<ol class="arabic simple" start="10">
<li>Choose the downloaded <code class="docutils literal"><span class="pre">london.osm</span></code> as the <span class="guilabel">Input XML file</span>.
Name the <span class="guilabel">Output SpatiaLite DB file</span> as <code class="docutils literal"><span class="pre">london.osm.db</span></code>. Make
sure the <span class="guilabel">Create connection (SpatiaLite) after import</span> button is
checked.</li>
</ol>
<img alt="../_images/1010.png" class="align-center" src="../_images/1010.png" />
<ol class="arabic simple" start="11">
<li>Now the last step. We need to create SpatialLite geometry layers that can
be viewed and analyzed in QGIS. This is done using <span class="menuselection">Vector
‣ OpenStreetMap ‣ Export topology to SpatialLite</span>.</li>
</ol>
<img alt="../_images/1113.png" class="align-center" src="../_images/1113.png" />
<ol class="arabic simple" start="12">
<li>The <code class="docutils literal"><span class="pre">london.osm.db</span></code> file contains all feature types in the OSM database -
Points, Lines and Polygons. GIS layers typically contain only one type of
feature, so you need to choose one. Since we are interested in point
locations of pubs, here you need to choose <span class="guilabel">Point (nodes)</span> as the
<span class="guilabel">Export type</span>. You would choose <span class="guilabel">Polylines (open ways)</span>
if you wanted to get the road network. Name the <span class="guilabel">Output layer
name</span> as <code class="docutils literal"><span class="pre">london_points</span></code>. GIS data has 2 parts to it - location and
attributes. We are also interested in the <strong>name</strong> of the pub - not just
its location, so we need to export that information as well. Click on
<span class="guilabel">Load from DB</span> under <span class="guilabel">Exported tags</span> section. This will
fetch all attributes from the <code class="docutils literal"><span class="pre">london.osm.db</span></code> file. Check
<span class="guilabel">name</span> and <span class="guilabel">amenity</span> tags. See <a class="reference external" href="http://wiki.openstreetmap.org/wiki/Tags">OSM Tags</a> to learn more about what
each attribute means. Make sure the <span class="guilabel">Load into canvas when
finished</span> is checked, and click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1212.png" class="align-center" src="../_images/1212.png" />
<ol class="arabic simple" start="13">
<li>You will see a new point layer named <code class="docutils literal"><span class="pre">london_points</span></code> loaded in QGIS. Note
that this contains <strong>ALL</strong> points in the OSM database for the viewport.
Since we are interested only in pubs, we need to write a query to select
only those. Right click on <code class="docutils literal"><span class="pre">london_points</span></code> layer and select
<span class="guilabel">Open Attribute Table</span>.</li>
</ol>
<img alt="../_images/1310.png" class="align-center" src="../_images/1310.png" />
<ol class="arabic simple" start="14">
<li>You will note that some features have the attribute value of <strong>pubs</strong>
listed under the <span class="guilabel">amenity</span> column. Click on <span class="guilabel">Select
features using an expression</span> button.</li>
</ol>
<img alt="../_images/149.png" class="align-center" src="../_images/149.png" />
<ol class="arabic simple" start="15">
<li><p class="first">Наберіть вираз <cite>&#8220;amenity&#8221; = &#8216;pub&#8217;</cite> і натисніть <span class="guilabel">Вибрати</span>.</p>
</li>
</ol>
<img alt="../_images/159.png" class="align-center" src="../_images/159.png" />
<ol class="arabic simple" start="16">
<li>Back in the QGIS Canvas, you will see some points highlighted in yellow.
These are the result of our query. Right-click the <code class="docutils literal"><span class="pre">london_points</span></code> layer
and choose <span class="guilabel">Save Selection As...</span>.</li>
</ol>
<img alt="../_images/168.png" class="align-center" src="../_images/168.png" />
<ol class="arabic simple" start="17">
<li>In the <span class="guilabel">Save vector layer as...</span> dialog, enter the name of the
output file as <code class="docutils literal"><span class="pre">london_pubs.shp</span></code>. Leave all other options as they are and
make sure the <span class="guilabel">Add saved file to map</span> option is checked. Click
<span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/177.png" class="align-center" src="../_images/177.png" />
<ol class="arabic simple" start="18">
<li>You will see a new layer named <code class="docutils literal"><span class="pre">london_pubs</span></code> in the QGIS canvas. Uncheck
the <code class="docutils literal"><span class="pre">london_points</span></code> layer as we don&#8217;t need that anymore.</li>
</ol>
<img alt="../_images/188.png" class="align-center" src="../_images/188.png" />
<ol class="arabic simple" start="19">
<li>The extraction of the pubs shapefile layer is now complete. You can use the
<span class="guilabel">Identify</span> tool to click on any of the point as see its
attributes.</li>
</ol>
<img alt="../_images/196.png" class="align-center" src="../_images/196.png" />
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Ujaval Gandhi.<br/>
      Востаннє оновлено Jul 14, 2017.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/downloading_osm_data.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>