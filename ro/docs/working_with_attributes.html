<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Lucrul cu Atribute &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Importul Foilor de Calcul sau a Fișierelor CSV" href="importing_spreadsheets_csv.html" />
    <link rel="prev" title="Crearea unei Hărți" href="making_a_map.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introducere</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Crearea unei Hărți</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Lucrul cu Atribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importul Foilor de Calcul sau a Fișierelor CSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Utilizarea Plugin-urilor</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Căutarea și descărcarea datelor OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Noțiuni de bază despre stilizarea vectorilor</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Determinarea Lungimii Liniilor și a Statisticilor</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Noțiuni de Bază despre Analiza și Stilizarea Rasterelor</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mozaicarea și Tăierea Rasterelor</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Lucrul cu date despre teren</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Lucrul cu Date WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Lucrul cu Proiecții</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferențierea Foilor Topografice și a Hărților Scanate</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferențierea Imaginilor Aeriene</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitizarea datelor provenite din hărți</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Unificarea tabelelor</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Realizarea uniunilor spațiale</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">Analiza Punctelor dintr-un Poligon</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Crearea hărților calorice</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Efectuarea Interogărilor Spațiale</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Analiza Celui Mai Apropiat Vecin</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Eșantionarea datelor raster, folosind puncte sau poligoane</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolarea Datelor de tip Punct</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Procesarea în serie, folosind cadrul de procesare</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automatizarea Fluxurilor de Lucru Complexe utilizând Modelatorul de Procese</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automatizarea Creării Hărților cu ajutorul Atlasului Compozitorului de Hărți</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Utilizarea QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">Aflarea numărului de noduri dintr-un strat</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Fișierele Open BIL, BIP sau BSQ în QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Noțiuni de bază despre programarea în Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Construirea unui Plugin Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Utilizarea Funcțiilor pentru Expresiile Python Personalizate</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Scriptare în Python pentru Cadrul de Procesare</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Rularea și programarea Activităților de Prelucrare QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_neighbor_polygons.html">Găsirea Poligoanelor Învecinate Dintr-un Strat</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins_pyqgis.html">Realizarea Uniunii Tabelelor (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Maparea Web cu ajutorul QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Crearea hărților de bază folosind QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Resurse de învățare QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Creditare date</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="making_a_map.html" title="Previous Chapter: Crearea unei Hărți"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Crearea unei Hăr...</span>
    </a>
  </li>
  <li>
    <a href="importing_spreadsheets_csv.html" title="Next Chapter: Importul Foilor de Calcul sau a Fișierelor CSV"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Importul Foilor ... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>



  


<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="working-with-attributes">
<h1>Lucrul cu Atribute<a class="headerlink" href="#working-with-attributes" title="Permalink to this headline">¶</a></h1>
<p>Datele GIS sunt compuse din două părți - entități și atribute. Atributele reprezintă date structurate despre fiecare entitate. Acest tutorial vă arată cum să vizualizați atributele și cum să le interogați în QGIS.</p>
<div class="section" id="overview-of-the-task">
<h2>Privire de ansamblu asupra activității<a class="headerlink" href="#overview-of-the-task" title="Permalink to this headline">¶</a></h2>
<p>Setul de date pentru acest tutorial conține informații despre locurile populate ale lumii. Scopul este de a interoga și de a găsi toate capitalele lumii care au mai mult de 1.000.000 locuitori.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Alte competențe pe care le veți dobândi<a class="headerlink" href="#other-skills-you-will-learn" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="first">Selectarea entităților dintr-un strat folosind expresii.</p>
</li>
<li><p class="first">Deselectarea entităților dintr-un strat folosind bara de instrumente <span class="guilabel">Attributes</span>.</p>
</li>
<li><p class="first">Folosirea  <span class="guilabel">Constructorului de Interogări</span> pentru a afișa un subset de entități dintr-un strat.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Obținerea datelor<a class="headerlink" href="#get-the-data" title="Permalink to this headline">¶</a></h2>
<p>Natural Earth dispune de un set de date cu <cite>Locuri Populate &lt;http://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-populated-places/&gt;</cite>. Descărcați setul de date <a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_populated_places_simple.zip">simplu (cu mai puține coloane)</a></p>
<p>Pentru comoditate, puteți descărca o copie a seturilor de date direct de la adresa de mai jos:</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ne_10m_populated_places_simple.zip">ne_10m_populated_places_simple.zip</a></p>
<p>Sursa de date <a class="reference internal" href="credits.html#naturalearth" id="id1">[NATURALEARTH]</a></p>
</div>
<div class="section" id="procedure">
<h2>Procedura<a class="headerlink" href="#procedure" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">O dată ce ați descărcat datele, deschideți QGIS. Mergeți la <span class="menuselection">Layer ‣ Add Layer ‣ Add Vector Layer</span>.</p>
</li>
</ol>
<img alt="../_images/1140.png" class="align-center" src="../_images/1140.png" />
<ol class="arabic simple" start="2">
<li><p class="first">Faceți clic pe <span class="guilabel">Browse</span> și navigați la folderul unde ați descărcat datele.</p>
</li>
</ol>
<img alt="../_images/298.png" class="align-center" src="../_images/298.png" />
<ol class="arabic simple" start="3">
<li><p class="first">Localizați fișierul descărcat, <cite>ne_10m_populated_places_simple.zip</cite>. Nu e nevoie să-l dezarhivați. QGIS are capacitatea de a citi în mod direct fișierele zip. Selectați fișierul și faceți clic pe <span class="guilabel">Open</span>.</p>
</li>
</ol>
<img alt="../_images/348.png" class="align-center" src="../_images/348.png" />
<ol class="arabic simple" start="4">
<li><p class="first">Straturile selectate se vor încărca în QGIS, după care vor apărea mai multe puncte, reprezentând locurile populate ale lumii.</p>
</li>
</ol>
<img alt="../_images/435.png" class="align-center" src="../_images/435.png" />
<ol class="arabic simple" start="5">
<li><p class="first">Faceți clic-dreapta pe layer și selectați <span class="guilabel">Open Attribute Table</span>.</p>
</li>
</ol>
<img alt="../_images/536.png" class="align-center" src="../_images/536.png" />
<ol class="arabic simple" start="6">
<li><p class="first">Explorați atributele și valorile lor.</p>
</li>
</ol>
<img alt="../_images/634.png" class="align-center" src="../_images/634.png" />
<ol class="arabic simple" start="7">
<li><p class="first">Deoarece ne interesează populația din fiecare entitate, <cite>pop_max</cite> va fi câmpul căutat. Puteți face dublu-clic pe denumirea câmpului, pentru a sorta coloana în ordine descrescătoare.</p>
</li>
</ol>
<img alt="../_images/733.png" class="align-center" src="../_images/733.png" />
<ol class="arabic simple" start="8">
<li><p class="first">Acum suntem gata de a efectua interogarea pe aceste atribute. QGIS folosește expresii bazate pe SQL pentru a efectua interogările.</p>
</li>
</ol>
<img alt="../_images/832.png" class="align-center" src="../_images/832.png" />
<ol class="arabic simple" start="9">
<li><p class="first">In fereastra <span class="guilabel">Select By Expression</span>, expandați secțiunea <span class="guilabel">Fields and Values</span> și efectuați dublu-clic pe eticheta <code class="docutils literal"><span class="pre">pop_max</span></code>. Veți observa că ea va vi adăugată în partea de jos a secțiunii expresiei. Dacă nu sunteți siguri cu privire la valorile câmpului, puteți face clic pe <span class="guilabel">Load all unique values</span> pentru a vedea valorile atributelor care sunt prezente în setul de date. În acest exercițiu, suntem în căutarea tuturor entităților care au o populație mai mare de <code class="docutils literal"><span class="pre">1,000,000</span></code>. Deci, completați expresia de mai jos și faceți clic pe <span class="guilabel">Select</span>.</p>
</li>
</ol>
<div class="highlight-none"><div class="highlight"><pre>&quot;pop_max&quot; &gt; 1000000
</pre></div>
</div>
<img alt="../_images/930.png" class="align-center" src="../_images/930.png" />
<ol class="arabic simple" start="10">
<li><p class="first">Faceți clic pe <span class="guilabel">Close</span> și reveniți la fereastra principală a QGIS. Veți observa că un subset de puncte este acum randat în galben. Acesta este rezultatul interogării noastre, putându-se vedea toate locurile din setul de date care au valoarea atributului <code class="docutils literal"><span class="pre">pop_max</span></code> mai mare de <code class="docutils literal"><span class="pre">1,000,000</span></code>.</p>
</li>
</ol>
<img alt="../_images/1031.png" class="align-center" src="../_images/1031.png" />
<ol class="arabic simple" start="11">
<li><p class="first">Scopul acestui exercițiu este de a găsi acele locații care sunt capitale ale unor țări. Câmpul care conține datele este <cite>adm0cap</cite>. Valoarea <code class="docutils literal"><span class="pre">1</span></code> indică faptul că locul este o capitală. Putem adăuga acest criteriu expresiei noastre anterioare, folosind operatorul <code class="docutils literal"><span class="pre">and</span></code>. Să rafinăm interogarea noastră prin selectarea numai a acelor locuri care sunt capitale. Faceți clic pe butonul <span class="guilabel">Selectați caracteristica utilizând o expresie</span> din tabelul de atribute și introduceți expresia de mai jos, apoi faceți clic pe <span class="guilabel">Select</span> și ulterior pe <span class="guilabel">Close</span>.</p>
</li>
</ol>
<div class="highlight-none"><div class="highlight"><pre>&quot;pop_max&quot; &gt; 1000000 and &quot;adm0cap&quot; = 1
</pre></div>
</div>
<img alt="../_images/1141.png" class="align-center" src="../_images/1141.png" />
<ol class="arabic simple" start="12">
<li><p class="first">Reveniți la fereastra principală a QGIS. Acum, veți vedea un mic subset de puncte selectate. Acesta este rezultatul celei de-a doua interogări, el arătându-ne acele locuri din setul de date, care sunt capitale țări și depășesc 1.000.000 locuitori. Dacă am vrut să facem unele analize suplimentare cu privire la acest subset de date, putem face această selecție persistentă. Faceți clic dreapta pe stratul <code class="docutils literal"><span class="pre">ne_10m_populated_places_simple</span></code> și selectați: guilabel:<cite>Properties</cite>.</p>
</li>
</ol>
<img alt="../_images/1231.png" class="align-center" src="../_images/1231.png" />
<ol class="arabic simple" start="13">
<li><p class="first">În fila <span class="guilabel">General</span>, mergeți la secțiunea <span class="guilabel">Feature subset</span>. Click pe <span class="guilabel">Query Builder</span>.</p>
</li>
</ol>
<img alt="../_images/1328.png" class="align-center" src="../_images/1328.png" />
<ol class="arabic simple" start="14">
<li><p class="first">Introduceți aceeași expresie pe care ați introdus-ot mai devreme, apoii faceți clic pe <span class="guilabel">OK</span>.</p>
</li>
</ol>
<div class="highlight-none"><div class="highlight"><pre>&quot;pop_max&quot; &gt; 1000000 and &quot;adm0cap&quot; = 1
</pre></div>
</div>
<img alt="../_images/1427.png" class="align-center" src="../_images/1427.png" />
<ol class="arabic simple" start="15">
<li><p class="first">Înapoi în fereastra principală QGIS, veți vedea că restul de puncte dispar. Puteți efectua acum orice altă analiză pe acest strat, și numai entitățile care se potrivesc expresiei noastre vor fi folosite. Veți observa că punctele încă apar în galben. Aceasta se datorează faptului că ele sunt încă selectate. Identificați butonul <span class="guilabel">Deselecează Entitățile din Toate Straturile</span> din bara de instrumente <span class="guilabel">Attribute</span> și faceți clic pe el.</p>
</li>
</ol>
<img alt="../_images/1525.png" class="align-center" src="../_images/1525.png" />
<ol class="arabic simple" start="16">
<li><p class="first">Veți vedea că acum punctele sunt de-selectate și randate în culoarea lor originală.</p>
</li>
</ol>
<img alt="../_images/1624.png" class="align-center" src="../_images/1624.png" />
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Ujaval Gandhi.<br/>
      Last updated on Apr 04, 2018.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/working_with_attributes.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>